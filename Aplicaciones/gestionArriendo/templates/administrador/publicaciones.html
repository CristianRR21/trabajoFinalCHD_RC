{% extends 'administrador/plantilla.html' %}
{% block contenido %}
<!--cometario-->

<h1 style="text-align: center;">Publicaciones Activas</h1><br>
  <script>
                function confirmarEliminacion(url){
                    Swal.fire({
                        title: '¿Estás seguro?',
                        text: '¡Esta acción no se puede deshacer!',
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Sí, eliminar',
                        cancelButtonText: 'Cancelar'
                        }).then((result) => {
                            if (result.isConfirmed) {
                                window.location.href = url;
                            }
                        });
                    }
          </script>


<div class="table-responsive">
    <table id="tblPublicaciones" class="table table-hover align-middle table-bordered text-center shadow-sm">

         <thead class="table-primary">
        <tr>
            <th>Id</th>
            <th>Foto</th>
            <th>Usuario</th>
            <th>Título</th>
            <th>Precio</th>
            <th>Descripción</th>
            <th>Tipo</th>
            <th>Fecha</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for item in publicaciones %}
        <tr>
            <td>{{ item.id }}</td> 
            <td>
                {% if item.foto_principal %}
                    <img src="{{ item.foto_principal.imagen.url }}"
                         style="height: 120px; width: 160px; object-fit: cover;" alt="Imagen">
                {% else %}
                    Sin imagen
                {% endif %}
            </td>
            <td>{{ item.usuario }}</td>
            <td>{{ item.titulo }}</td>
            <td>{{ item.precio }}</td>
            <td>{{ item.descripcion }}</td>
            <td>{{ item.tipohabitacion.nombre }}</td>
            <td>{{ item.fechacreacion }}</td>
            <td>
               <a href="/detallesPublicacionAdmin/{{item.id}}"><i class="fa fa-eye"></i></a>
      
                <a href="#"class="btn btn-outline-danger btn-sm btn-eliminar" title="Eliminar" onclick="confirmarEliminacion('/eliminarPublicacionAdmin/{{item.id}}')">
                        <i class="fa fa-trash"></i>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

</div>



<script>
$(document).ready(function() {
    let table = new DataTable('#tblPublicaciones', {
        language: {
            url: 'https://cdn.datatables.net/plug-ins/2.3.1/i18n/es-ES.json'
        },
        dom: 'Bfrtip', 
        buttons: [
            'copy',
            'csv',
            'excel',
            'pdf',
            'print'
        ]
    });
});
</script>

{% endblock %}
