{% extends 'administrador/plantilla.html' %}
{% block contenido %}

<h1>Publicaciones Activas</h1>

<table class="table table-striped table-bordered" id="tblPublicaciones">
    <thead>
        <tr>
            <th>Id</th>
            <th>Foto</th>
            <th>Usuario</th>
            <th>Título</th>
            <th>Precio</th>
            <th>Descripción</th>
            <th>Tipo</th>
            <th>Fecha</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for item in publicaciones %}
        <tr>
            <td>{{ item.id }}</td> 
            <td>
                {% if item.foto_principal %}
                    <img src="{{ item.foto_principal.imagen.url }}"
                         style="height: 120px; width: 160px; object-fit: cover;" alt="Imagen">
                {% else %}
                    Sin imagen
                {% endif %}
            </td>
            <td>{{ item.usuario }}</td>
            <td>{{ item.titulo }}</td>
            <td>{{ item.precio }}</td>
            <td>{{ item.descripcion }}</td>
            <td>{{ item.tipohabitacion }}</td>
            <td>{{ item.fechacreacion }}</td>
            <td>
                <a href="#">Ver</a> |
                <a href="#">Eliminar</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>





<script>
$(document).ready(function() {
    let table = new DataTable('#tblPublicaciones', {
        language: {
            url: 'https://cdn.datatables.net/plug-ins/2.3.1/i18n/es-ES.json'
        },
        dom: 'Bfrtip', 
        buttons: [
            'copy',
            'csv',
            'excel',
            'pdf',
            'print'
        ]
    });
});
</script>

{% endblock %}
