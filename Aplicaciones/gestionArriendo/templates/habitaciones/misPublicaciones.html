{% extends 'habitaciones/plantilla.html' %}
{% block contenido %}
<br>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<style>
  .tarjeta-publicacion {
    background: #fff;
    border: 2px solid #9e9e9e; 

    border-radius: 0.5rem;   
    padding: 1rem;
  }
  
  
</style>
<div id="contenedor-publicaciones" class="container mt-4">
  <a href="/nuevaPublicacion" class="btn btn-success md-4">Nueva Publicación</a><br><br>
  {% if publicaciones %}
    {% for pub in publicaciones %}
    <div class="tarjeta-publicacion mb-4">
        
      <div class="row">

        <!-- Imagen izquierda -->
        <div class="col-md-2 col-12 text-center mb-3 mb-md-0" style="height: 155px;">
          {% if pub.foto_url %}
            <img src="{{ pub.foto_url }}" alt="Imagen de {{ pub.titulo }}"
                 style="width: 100%; height: 100%; object-fit: cover;" class="rounded">
          
          {% endif %}
        </div>
        <!-- Detalles centrales -->
        <div class="col-md-8 col-12">
         
  <p class="mb-1 text-primary fw-bold"><strong>Precio: $</strong> {{ pub.precio }} / mes</p>
           <p class="mb-1"><strong>Titulo:</strong> {{ pub.titulo }}</p>
          <p class="mb-1"><strong>Tipo:</strong> {{ pub.tipo }}</p>
          <p class="mb-1"><strong>Descripción:</strong> {{ pub.descripcion|truncatechars:150 }}</p>


        </div>

    
        <div class="col-md-2 col-12 d-flex flex-column align-items-start justify-content-center gap-2 mt-3 mt-md-0">
          
<div class="d-flex gap-2">
  <br><br>
  <a href="editarPublicacion/{{pub.id}}" class="btn btn-warning btn-sm flex-fill" title="Editar publicación">
    <i class="bi bi-pencil-square"></i> Editar
  </a>

  <a href="#" class="btn btn-danger btn-sm flex-fill" title="Eliminar publicación" onclick="confirmarEliminacion('/eliminarPublicacion/{{pub.id}}')">
    <i class="bi bi-trash"></i> Eliminar
  </a>
</div>
          
          <script>
                function confirmarEliminacion(url){
                    Swal.fire({
                        title: '¿Estás seguro?',
                        text: '¡Esta acción no se puede deshacer!',
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Sí, eliminar',
                        cancelButtonText: 'Cancelar'
                        }).then((result) => {
                            if (result.isConfirmed) {
                                window.location.href = url;
                            }
                        });
                    }
          </script>
          
        </div>

      </div>
    </div>
    <br>
    {% endfor %}
  {% else %}
    <div class="alert alert-warning">No hay publicaciones registradas todavía.</div>
  {% endif %}
</div>



{% endblock %}
