{% extends 'habitaciones/plantilla.html' %}
{% block contenido %}
<div class="container mt-4">
    
   <style>
    .thead-importante {
    background-color: #cfe2ff !important; 
    color: #084298 !important;            
}

   </style>

    <h2 style="text-align: center; font-family: 'Montserrat', sans-serif;">Mis Comentarios</h2><br>
    {% if comentarios %}

    <table class="table table-striped table-bordered" id="tbl">
         <thead class="thead-importante">
            <tr>
                <th>Publicación</th>
                <th>Comentario</th>
                <th>Fecha</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for comentario in comentarios %}
            <tr>
                <td>{{ comentario.publicacion.titulo }}</td>
                <td>{{ comentario.texto }}</td>
                <td>{{ comentario.fecha|date:"d/m/Y" }}</td>
    <td>
        <button 
            type="button" 
            class="btn btn-sm btn-danger d-flex align-items-center gap-1" 
            onclick="confirmarEliminacion('/eliminarComentario/{{ comentario.id }}/')"
            title="Eliminar comentario"
        >
            <i class="bi bi-trash"></i> Eliminar
        </button>
</td>

            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="alert alert-info text-center">No has hecho comentarios aún.</div>
    {% endif %}
</div>

<script>
function confirmarEliminacion(url){
    Swal.fire({
        title: '¿Estás seguro?',
        text: '¡Esta acción no se puede deshacer!',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Sí, eliminar',
        cancelButtonText: 'Cancelar'
    }).then((result) => {
        if (result.isConfirmed) {
            window.location.href = url;
        }
    });
}
</script>

<script>
$(document).ready(function() {
    let table = new DataTable('#tbl', {
        language: {
            url: 'https://cdn.datatables.net/plug-ins/2.3.1/i18n/es-ES.json'
        },
        dom: 'Bfrtip', 
        buttons: [
            'copy',
            'csv',
            'excel',
            'pdf',
            'print'
        ]
    });
});
</script>
{% endblock %}
